<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åŒ¿åç¤¼ç‰©æŠ½ç­¾</title>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
    <style>
        body { font-family: 'PingFang SC', sans-serif; background: #f4f4f7; display: flex; justify-content: center; align-items: center; height: 100vh; margin: 0; }
        .card { background: white; padding: 2rem; border-radius: 15px; box-shadow: 0 10px 25px rgba(0,0,0,0.1); text-align: center; width: 90%; max-width: 400px; }
        input { padding: 10px; width: 80%; border: 1px solid #ddd; border-radius: 5px; margin-bottom: 1rem; font-size: 1rem; }
        button { background: #e63946; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; font-size: 1rem; }
        .gift-box { font-size: 80px; cursor: pointer; transition: transform 0.3s; margin: 20px 0; display: none; }
        .gift-box.shake { animation: shake 0.5s infinite; }
        @keyframes shake { 0% { transform: rotate(0); } 25% { transform: rotate(5deg); } 50% { transform: rotate(0); } 75% { transform: rotate(-5deg); } 100% { transform: rotate(0); } }
        #result { font-size: 1.5rem; font-weight: bold; color: #1d3557; margin-top: 20px; display: none; }
    </style>
</head>
<body>

<div class="card" id="app">
    <h2>ğŸ ç¤¼ç‰©æŠ½ç­¾</h2>
    <div id="login-section">
        <p>è¯·è¾“å…¥ä½ çš„åå­—å¼€å§‹æŠ½ç­¾</p>
        <input type="text" id="userName" placeholder="ä½ çš„åå­—">
        <br>
        <button onclick="startDraw()">è¿›å…¥</button>
    </div>

    <div id="draw-section" style="display:none;">
        <p>ç‚¹å‡»ç¤¼ç›’æŠ½å–ä½ çš„é€ç¤¼å¯¹è±¡</p>
        <div id="gift" class="gift-box" onclick="revealResult()">ğŸ</div>
        <div id="result"></div>
    </div>
</div>

<script>
    // --- ä¸»åŠæ–¹åœ¨æ­¤é…ç½®åå• ---
    const participants = ["å¼ ä¸‰", "æå››", "ç‹äº”", "èµµå…­", "å°æ˜", "å°çº¢"];
    
    // æ ¸å¿ƒç®—æ³•ï¼šç”Ÿæˆä¸åŒ…å«è‡ªå·±çš„éšæœºæ˜ å°„ï¼ˆç”Ÿæˆåæ‰‹åŠ¨å›ºå®šï¼Œæˆ–é€šè¿‡ç®€å•ç®—æ³•ç”Ÿæˆï¼‰
    // ä¸ºäº†ç®€å•èµ·è§ï¼Œè¿™é‡Œæ¼”ç¤ºä¸€ä¸ªåŸºäºåå•é¡ºåºåç§»çš„é€»è¾‘
    function getTarget(name) {
        const index = participants.indexOf(name);
        if (index === -1) return null;
        // ç®€å•çš„åç§»ç®—æ³•ï¼šæ¯ä¸ªäººæŠ½å–åä¸€ä¸ªï¼Œæœ€åä¸€ä¸ªæŠ½å–ç¬¬ä¸€ä¸ªã€‚
        // è¿™æ ·ä¿è¯ä¸é‡å¤ã€ä¸æŠ½åˆ°è‡ªå·±ã€‚
        const targetIndex = (index + 1) % participants.length;
        return participants[targetIndex];
    }

    function startDraw() {
        const name = document.getElementById('userName').value.trim();
        if (participants.includes(name)) {
            document.getElementById('login-section').style.display = 'none';
            document.getElementById('draw-section').style.display = 'block';
            document.getElementById('gift').style.display = 'block';
        } else {
            alert("åå•é‡Œæ²¡æœ‰ä½ çš„åå­—å“¦ï¼Œè¯·æ£€æŸ¥è¾“å…¥ï¼");
        }
    }

    function revealResult() {
        const name = document.getElementById('userName').value.trim();
        const target = getTarget(name);
        const gift = document.getElementById('gift');
        
        gift.classList.add('shake');
        
        setTimeout(() => {
            gift.style.display = 'none';
            const resultDiv = document.getElementById('result');
            resultDiv.innerHTML = `ä½ æŠ½åˆ°äº†ï¼š<br><span style="color:red; font-size:2rem;">${target}</span>`;
            resultDiv.style.display = 'block';
            confetti({ particleCount: 150, spread: 70, origin: { y: 0.6 } });
        }, 1500);
    }
</script>
</body>
</html>
